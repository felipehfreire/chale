<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<ui:composition template="secure/template.xhtml">

	<ui:define name="content">
		<h:form id="submitForm" class="bs-example form-horizontal">
			<div class="page-header"></div>
			<div class="row container-center">
				<div class="col-lg-8 div-center">
					<div class="well">
					
						<div class="form-group">
							<h:outputLabel value="Cód. Produto" class="col-lg-1 control-label" for="codProd" />
							<div class="col-lg-1">
								<h:inputText class="form-control" name="codProd" id="codProd" value="#{pedidoController.produto}" />
							</div>
							
							<div class="col-lg-3">
								<h:selectOneMenu id="prods" label="prods"   
					             	value="#{pedidoController.produtoSelecionado}"  
					             	onchange="submit()"  immediate="true" 
					                converter="simpleEntityConverter" required="true"
					                valueChangeListener="#{pedidoController.changeProd}">  Produto
					                <f:selectItem itemValue="" itemLabel="Selecione um Produto"/>  
					                <f:selectItems value="#{pedidoController.produtosSelect}" 
					                	var="prod" 
					                	itemLabel="#{prod.descricao}" 
					                	itemValue="#{prod}"/>  
					            </h:selectOneMenu> 
				            </div>
				            
				            <h:outputLabel value="Quantidade" class="col-lg-1 control-label" for="qtdProd" />
				            <div class="col-lg-1">
				            	<h:inputText class="form-control" name="qtdProd" id="qtdProd" value="#{pedidoController.pedidoProduto.quantidade}"
				            	
									converter="javax.faces.Number"  />
				            </div>
				            
				              <p:commandButton id="btn_add" value="Add" update="pedidos @parent"  
                           	  		action="#{pedidoController.reiniciar}" >  
              						 <p:collector value="#{pedidoController.produto}"   
                         			 addTo="#{pedidoController.produtosInseridos}" />  
       						  </p:commandButton>  
							
						</div>
					
					<div class="well">
						 <div class="form-group">
							<p:outputPanel id="pedidos">  
								<p:dataTable  value="#{pedidoController.produtosInseridos}" var="prodIn">
								
									<p:column headerText="Código">
										<h:outputText value="#{prodIn.descricao}"/>
									</p:column>
									
									<p:column headerText="Produto">
										<h:outputText value="#{item.descricao}"/>
									</p:column>
									
									<p:column headerText="Quantidade">
										<h:outputText value="#{item.descricao}"/>
									</p:column>
									
									<p:column headerText="Editar">
										<h:commandButton class="btn btn-primary" ajax="false" value="Editar" action="#{produtoController.editar}">
										<f:setPropertyActionListener value="#{item}"
		                        			target="#{produtoController.produto}" />
		                    		</h:commandButton>
									</p:column>
									
								</p:dataTable>
							</p:outputPanel>
						</div>
					</div>
					
					<div class="well">
						<div class="col-lg-3">
						 	<h:outputText value="Data "/>
            			 	<h:inputText value="#{pedidoController.dataAtual}" mask="99/99/9999"  converter="javax.faces.DateTime" readonly="true" />
            			 </div>
            			 <div class="col-lg-3">
            			 	<h:outputText id="aVista" value="À vista" />  
        						<p:selectBooleanCheckbox value="#{pedidoController.aVista}">  
        					</p:selectBooleanCheckbox>  
            			 </div>
            			 
            			 <div class="col-lg-3">
            			 	<h:selectOneMenu id="mesa" label="mesas"   
				             	value="#{pedidoController.mesaSelecionada}" 
			             	   	onchange="submit()"  
               					immediate="true"  
				                converter="simpleEntityConverter"
				                valueChangeListener="#{pedidoController.changeMesa}"> Mesa 
				                <f:selectItem itemValue="" itemLabel="Selecione uma Mesa"/>  
				                <f:selectItems value="#{pedidoController.mesas}" 
				                	var="mesa" 
				                	itemLabel="#{mesa.numeroMesa}" 
				                	itemValue="#{mesa}"/>  
				            </h:selectOneMenu> 
            			 </div>
            			 	  
					</div>
				</div>
			</div>
		</div>
		</h:form>
	</ui:define>
	
</ui:composition>
</html>